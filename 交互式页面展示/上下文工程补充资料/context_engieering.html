<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>交互式上下文工程指南</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Cool Slate & Mint -->
    <!-- Application Structure Plan: The SPA is designed as an educational, single-page explainer. The structure is thematic and hierarchical to guide the user's learning journey. It starts with a high-level definition, moves to the "Problems" (the four failure reasons) presented as interactive cards, and then dives into the "Solutions" (the six methods). The solutions section is the core interactive element, using a master-detail pattern where clicking a method in a grid view updates a detailed display area. This structure was chosen to transform a static, dense document into an engaging, explorable learning tool, allowing users to focus on one concept at a time. -->
    <!-- Visualization & Content Choices: 1) Key Concepts (Goal: Inform): Presented using clear typography and distinct sections. 2) Failure Reasons (Goal: Inform/Organize): Interactive cards (HTML/CSS) are used. On hover, they provide visual feedback, and on click (on mobile), they can reveal more info if needed. This makes the information less intimidating than a wall of text. 3) Optimization Methods (Goal: Compare/Interact): A dynamic grid of buttons (HTML/CSS) acts as the primary navigation for this section. Clicking a button updates a "detail view" (HTML/JS) with the corresponding method's core idea, effects, and use cases. This interactive filtering is more engaging than a static table and allows for direct comparison. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Helvetica Neue', 'Arial', 'sans-serif';
            background-color: #f1f5f9; /* slate-100 */
            color: #334155; /* slate-700 */
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .reason-card {
            border-left: 4px solid #64748b; /* slate-500 */
        }
        .reason-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .method-btn {
            cursor: pointer;
            padding: 1rem;
            border: 2px solid #e2e8f0; /* slate-200 */
            border-radius: 0.5rem;
            text-align: center;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
        }
        .method-btn:hover {
            background-color: #f8fafc; /* slate-50 */
            border-color: #38bdf8; /* sky-400 */
        }
        .method-btn.active {
            background-color: #0ea5e9; /* sky-500 */
            color: white;
            border-color: #0ea5e9;
        }
        .detail-card {
            background-color: #f8fafc; /* slate-50 */
            border: 1px solid #e2e8f0; /* slate-200 */
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl">
        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">上下文工程（Context Engineering）</h1>
            <p class="mt-3 text-lg text-slate-600">用正确信息填充上下文窗口的精妙艺术和科学</p>
        </header>

        <main class="space-y-12">
            <!-- Section 1: Failure Reasons -->
            <section id="failure-reasons">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 text-center">上下文经常让模型“翻车”的四大原因</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="card p-6 reason-card">
                        <h3 class="font-bold text-lg text-slate-900 mb-2">上下文污染</h3>
                        <p class="text-slate-600">当幻觉或其他错误信息进入上下文后，它会不断被模型引用，进而加剧错误。</p>
                    </div>
                    <div class="card p-6 reason-card">
                        <h3 class="font-bold text-lg text-slate-900 mb-2">上下文干扰</h3>
                        <p class="text-slate-600">上下文太长，模型反而过度关注新加入的资料，而忽略了训练中学到的知识。</p>
                    </div>
                    <div class="card p-6 reason-card">
                        <h3 class="font-bold text-lg text-slate-900 mb-2">上下文混淆</h3>
                        <p class="text-slate-600">无关的信息干扰模型推理，导致生成低质量结果。</p>
                    </div>
                    <div class="card p-6 reason-card">
                        <h3 class="font-bold text-lg text-slate-900 mb-2">上下文冲突</h3>
                        <p class="text-slate-600">提示语中加入的新信息与既有信息或工具定义相互矛盾。</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Optimization Methods -->
            <section id="optimization-methods" class="card p-6 sm:p-8">
                <h2 class="text-2xl font-bold text-slate-800 mb-2 text-center">六大上下文优化策略</h2>
                <p class="text-center text-slate-600 mb-8">点击下方的方法，查看其详细说明、效果和适用场景。</p>
                
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8" id="method-buttons">
                    <!-- Buttons will be generated by JS -->
                </div>

                <div id="method-detail" class="detail-card p-6 rounded-lg min-h-[200px]">
                    <!-- Detail content will be updated by JS -->
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const methodsData = [
                { 
                    name: "上下文卸载", 
                    idea: "将重要但非必需的信息外置存储，在需要时再调入上下文。", 
                    effect: "性能提升54%", 
                    scene: "多步推理、长对话" 
                },
                { 
                    name: "RAG 检索增强", 
                    idea: "在庞大的知识库中，精准检索与当前问题最相关的信息片段并注入上下文。", 
                    effect: "减少信息噪音", 
                    scene: "知识问答、文档分析" 
                },
                { 
                    name: "上下文修剪", 
                    idea: "动态地从上下文中删除无关或过时的信息，保持其简洁高效。", 
                    effect: "内容压缩95%", 
                    scene: "上下文内有大量无关或过时信息" 
                },
                { 
                    name: "工具负载优化", 
                    idea: "不提供所有工具的完整定义，只在上下文中包含当前步骤所必需的工具。", 
                    effect: "准确率提升3倍", 
                    scene: "多工具调用场景" 
                },
                { 
                    name: "上下文总结", 
                    idea: "用持续生成的摘要来压缩长篇的历史对话信息，保留核心要点。", 
                    effect: "避免重复行为", 
                    scene: "会话历史过长，需要重新聚焦" 
                },
                { 
                    name: "上下文隔离", 
                    idea: "将一个复杂任务拆解成多个子任务，为每个子任务创建独立的、并行的上下文进行处理。", 
                    effect: "整体性能提升90%", 
                    scene: "任务可拆解，多个子代理并行探索" 
                }
            ];

            const methodButtonsContainer = document.getElementById('method-buttons');
            const methodDetailContainer = document.getElementById('method-detail');
            let activeMethodIndex = 0;

            const renderButtons = () => {
                methodButtonsContainer.innerHTML = '';
                methodsData.forEach((method, index) => {
                    const button = document.createElement('div');
                    button.className = `method-btn ${index === activeMethodIndex ? 'active' : ''}`;
                    button.textContent = method.name;
                    button.dataset.index = index;
                    methodButtonsContainer.appendChild(button);
                });
            };

            const renderDetail = () => {
                const method = methodsData[activeMethodIndex];
                methodDetailContainer.innerHTML = `
                    <h3 class="text-xl font-bold text-sky-600 mb-4">${method.name}</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-800 mb-1">核心思路</h4>
                            <p class="text-slate-600">${method.idea}</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-800 mb-1">效果</h4>
                            <p class="text-slate-600 font-medium text-green-600">${method.effect}</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-800 mb-1">适用场景</h4>
                            <p class="text-slate-600">${method.scene}</p>
                        </div>
                    </div>
                `;
            };

            methodButtonsContainer.addEventListener('click', (e) => {
                const button = e.target.closest('.method-btn');
                if (button && button.dataset.index) {
                    activeMethodIndex = parseInt(button.dataset.index);
                    renderButtons();
                    renderDetail();
                }
            });

            // Initial render
            renderButtons();
            renderDetail();
        });
    </script>
</body>
</html>
